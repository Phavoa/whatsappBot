{% extends "base.html" %}

{% block title %}
Home
{% endblock %}

{% block content %}
<div class="p-5 bg-secondary">
  <div class="row justify-content-between">
    <div class="col-8">
      <div class="bg-light">
        <div class="bg-dark text-light p-3 rounded-top-2 mb-4">WhatsApp Campaign</div>
        <div class="px-3 fs-6">
          <form id="campaignForm" action="">

            <!-- Campaign Name -->
            <fieldset class="shadow rounded p-3 mb-3">
              <legend class="text-success fw-bold">
                Campaign Details
              </legend>
              <p>Enter a name to identify this campaign and a short description (optional)</p>
              <div class="mb-3">
                <input type="text" class="form-control" id="campaignName" placeholder="Campaign Name" aria-label="Campaign Name">
              </div>

              <!-- Campaign Description -->
              <div class="mb-3">
                <textarea class="form-control" id="campaignDescription" rows="3" aria-label="Description" placeholder="Enter campaign description"></textarea>
              </div>
            </fieldset>

            <!-- Template Selection -->
            <fieldset class="shadow rounded p-3">
              <legend class="text-success fw-bold mb-3">Pick a Template</legend>
              <div class="input-group mb-3">
                <select class="form-select" id="templateSelect" aria-label="Template select with button addon">
                  <option selected>Choose...</option>
                  <option value="1">One</option>
                  <option value="2">Two</option>
                  <option value="3">Three</option>
                </select>
              </div>
            </fieldset>

            <!-- Header -->
            <fieldset class="shadow rounded p-3">
              <legend class="text-success fw-bold mb-3">Header</legend>
              <div class="input-group mb-3">
                <label class="input-group-text" for="img-file"><i class="bi bi-paperclip"></i></label>
                <input type="file" class="form-control" id="img-file" name="img_file" aria-label="Image"
                       accept="image/*" onchange="updateFileName(this)" style="display: none" />
                <input type="text" class="form-control" placeholder="Image" value="" readonly />
              </div>
            </fieldset>

            <!-- Body -->
            <fieldset class="shadow rounded p-3">
              <legend class="text-success fw-bold mb-3">Body</legend>
              <p>Hey <span id="previewRecipient1">Recipient1</span></p>
              <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic minus blanditiis assumenda eveniet dolores beatae aspernatur neque, velit quos nulla!</p>
              <p>Press the info button if you are interested in learning more</p>

              <!-- Recipient Fields -->
              <div class="input-group mb-3">
                <input type="text" class="form-control recipient-input" placeholder="Recipient's username" aria-label="Recipient's username">
                <button class="btn btn-outline-secondary" type="button">Button</button>
              </div>
              <div class="input-group mb-3">
                <input type="text" class="form-control recipient-input" placeholder="Recipient's username" aria-label="Recipient's username">
                <button class="btn btn-outline-secondary" type="button">Button</button>
              </div>
              <div class="input-group mb-3">
                <input type="text" class="form-control recipient-input" placeholder="Recipient's username" aria-label="Recipient's username">
                <button class="btn btn-outline-secondary" type="button">Button</button>
              </div>
            </fieldset>

            <!-- Footer -->
            <fieldset class="shadow rounded p-3">
              <legend class="text-success fw-bold mb-3">Footer</legend>
              <div class="input-group">
                <input type="text" class="form-control" id="footerUsername" placeholder="footer" aria-label="Username">
              </div>
            </fieldset>

            <!-- Additional Information Button -->
            <fieldset class="shadow rounded p-3">
              <legend class="text-success fw-bold mb-3">Buttons</legend>
              <button type="button" class="btn btn-outline-success">More info</button>
            </fieldset>

            <!-- Contacts -->
            <fieldset class="shadow rounded p-3">
              <legend class="text-success fw-bold mb-3">Contacts</legend>
              <div class="form-check">
                <input class="form-check-input bg" type="radio" name="flexRadioDefault" id="flexRadioDefault1">
                <label class="form-check-label" for="flexRadioDefault1">
                  Default radio
                </label>
              </div>
              <div class="form-check">
                <input class="form-check-input" type="radio" name="flexRadioDefault" id="flexRadioDefault2" checked>
                <label class="form-check-label" for="flexRadioDefault2">
                  Default checked radio
                </label>
              </div>
            </fieldset>
          </form>
        </div>
      </div>
    </div>

    <div class="col-4 border ml-5">
      <div class="bg-dark text-light p-3 rounded-top-2 mb-4">WhatsApp Preview</div>
      <div id="whatsappPreview" class="whatsapp-preview">
        <div class="whatsapp-header">
          <h3 id="previewCampaignName">Campaign Name</h3>
          <p id="previewCampaignDescription">Campaign Description</p>
        </div>
        <div class="whatsapp-body">
          <p>Hey <span id="previewRecipient1">Recipient1</span></p>
          <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Hic minus blanditiis assumenda eveniet dolores beatae aspernatur neque, velit quos nulla!</p>
          <p>Press the info button if you are interested in learning more</p>
        </div>
        <div class="whatsapp-footer">
          <p>@<span id="previewFooterUsername">Username</span></p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .whatsapp-preview {
    background-color: #dcf8c6;
    border: 1px solid #ece5dd;
    border-radius: 10px;
    padding: 15px;
    margin-top: 10px;
  }

  .whatsapp-header, .whatsapp-body, .whatsapp-footer {
    margin-bottom: 10px;
  }

  .whatsapp-header h3, .whatsapp-footer p {
    margin: 0;
    color: #075e54;
  }

  .whatsapp-body p {
    margin: 5px 0;
    color: #4a4a4a;
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('campaignName').addEventListener('input', function() {
      document.getElementById('previewCampaignName').textContent = this.value;
    });

    document.getElementById('campaignDescription').addEventListener('input', function() {
      document.getElementById('previewCampaignDescription').textContent = this.value;
    });

    document.querySelectorAll('.recipient-input').forEach(function(input, index) {
      input.addEventListener('input', function() {
        document.getElementById('previewRecipient' + (index + 1)).textContent = this.value;
      });
    });

    document.getElementById('footerUsername').addEventListener('input', function() {
      document.getElementById('previewFooterUsername').textContent = this.value;
    });
  });
</script>
{% endblock %}


















<fieldset class="shadow rounded p-3">
  <legend class="text-success fw-bold mb-3">Header</legend>
  <div class="input-group mb-3">
    <label class="input-group-text" for="img-file"><i class="bi bi-paperclip"></i></label>
    <input type="file" class="form-control" id="img-file" name="img_file" aria-label="Image"
           accept="image/*" onchange="updateFileName(this)" style="display: none" />
    <input type="text" class="form-control" placeholder="Image" value="" readonly />
  </div>
</fieldset>



<script>
  document.addEventListener('DOMContentLoaded', function() {
    document.getElementById('campaignName').addEventListener('input', function() {
      document.getElementById('previewCampaignName').textContent = this.value;
    });

    document.getElementById('campaignDescription').addEventListener('input', function() {
      document.getElementById('previewCampaignDescription').textContent = this.value;
    });

    document.getElementById('messageBody').addEventListener('input', function() {
      document.getElementById('previewMessageBody').textContent = this.value;
    });

    document.getElementById('footerUsername').addEventListener('input', function() {
      document.getElementById('previewFooterUsername').textContent = this.value;
    });

    document.getElementById('img-file').addEventListener('change', function(event) {
      const [file] = event.target.files;
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          document.getElementById('previewImage').src = e.target.result;
          document.getElementById('previewImage').style.display = 'block';
        }
        reader.readAsDataURL(file);
      }
    });

    document.querySelectorAll('.recipient-input').forEach(function(input, index) {
      input.addEventListener('input', function() {
        document.getElementById('previewRecipient' + (index + 1)).textContent = this.value;
      });
    });
  });

  function toggleMoreInfo() {
    const moreInfo = document.querySelector('.more-info');
    moreInfo.style.display = moreInfo.style.display === 'block' ? 'none' : 'block';
  }
</script>